# 解码策略



大模型中的温度采样和top-k是什么？

温度采样是一种用于大模型解码阶段概率化的技术，能够提高生成token的多样性。

大模型是通过计算词表中，每一个词的概率来预测下一个生成的词。

词表中的每个词，都会对应一个概率值。

每次选取概率值最高的词，被称为贪婪解码。贪婪解码输出的词比较单一。

温度采样，则是按照概率值的大小，从中进行随机化抽取，选取出下一个 词。



假设词表的大小为3，模型输出单词的概率为：0.6,0.2,0.2。

对于相同的输入:

如果时贪婪解码，每次都会选取概率值最大0.6的词输出。

如果是概率化的方式，抽中0.6的概率最高，但也会随机抽到0.2的。



温度采样，是对概率的分布缩放处理。

还是以（0.6,0.2,0.2）为例。

每个概率都会除以温度采样。

当temp = 1，概率分布不变。

当temp < 1,  概率分布会锐化。大的概率值会更加凸显。

当temp > 1, 概率分布会扁平化。各个概念之间的差距会缩小。

通过设置温度采样值，来调整模型输出的丰富度。当模型输出太呆板，可以将温度采样调大，就会生成更加丰富的词。



top-k则决定哪些词会进行随机抽取的过程。

比如top-k = 30，那么只会从概率最大的前30个词中，随机抽取。

top-k能够剔除概率值极小的值，防止输出中出现无关的词。





